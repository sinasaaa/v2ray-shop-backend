// ===== MODIFIED CODE (Section: prisma/schema.prisma) =====

// (generator و datasource مثل قبل باقی می‌مانند)

model User {
  id        BigInt   @id // Telegram User ID
  firstName String
  lastName  String?
  username  String?
  role      UserRole @default(STUDENT)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // A user (if they are an admin) can have one panel setting
  panel       Panel?
  enrollments Enrollment[]
  courses     Course[]
}

// NEW MODEL for panel settings
model Panel {
  id        Int      @id @default(autoincrement())
  url       String
  username  String
  password  String   // In a real high-security app, this should be encrypted

  // Relation to the admin user
  user      User     @relation(fields: [userId], references: [id])
  userId    BigInt   @unique // Each admin has only one panel setting

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Course { /* ... as before ... */ }
model Enrollment { /* ... as before ... */ }

enum UserRole {
  STUDENT
  INSTRUCTOR
  ADMIN
}
